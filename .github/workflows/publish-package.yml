---
    name: Publish Package
    
    on:
      workflow_dispatch:
    
    jobs:
      build:
        runs-on: [self-hosted, dind]
        steps:
          - uses: actions/checkout@v4

          - uses: actions/setup-node@v4
            with:
              node-version: '20.x'
              registry-url: 'https://npm.pkg.github.com'
    
          - name: Install yarn
            run: |
              npm install -g yarn
              yarn set version 4.5.3
    
          - run: |
              yarn config set npmAlwaysAuth true
              yarn config set npmAuthToken $NODE_AUTH_TOKEN
              yarn config set npmPublishRegistry https://npm.pkg.github.com
            env:
              NODE_AUTH_TOKEN: ${{ secrets.USG_GITHUB_TOKEN }}
    
          - name: Publish to GitHub Packages
            run: yarn npm publish
              